[gd_scene load_steps=12 format=2]

[ext_resource path="res://default_env.tres" type="Environment" id=1]
[ext_resource path="res://views/editor/viewport.gd" type="Script" id=2]
[ext_resource path="res://views/editor/camera.gd" type="Script" id=3]
[ext_resource path="res://icons/icon_material_preview_light_2.svg" type="Texture" id=4]
[ext_resource path="res://icons/icon_camera.svg" type="Texture" id=5]
[ext_resource path="res://icons/icon_material_preview_light_1.svg" type="Texture" id=6]
[ext_resource path="res://views/editor/draw_axis.gd" type="Script" id=7]
[ext_resource path="res://views/editor/runtime_tree.gd" type="Script" id=8]
[ext_resource path="res://views/themes/fonts/fira_sans_bold.tres" type="DynamicFont" id=9]

[sub_resource type="World" id=1]
environment = ExtResource( 1 )

[sub_resource type="StyleBoxFlat" id=2]
content_margin_left = 6.0
content_margin_right = 6.0
content_margin_top = 6.0
content_margin_bottom = 6.0
bg_color = Color( 0.117647, 0.117647, 0.117647, 0.784314 )
corner_radius_top_left = 4
corner_radius_top_right = 4
corner_radius_bottom_right = 4
corner_radius_bottom_left = 4

[node name="HSplitContainer" type="HSplitContainer"]
margin_top = 26.0
margin_right = 1352.0
margin_bottom = 754.0
size_flags_horizontal = 3
size_flags_vertical = 3
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Tree" type="Tree" parent="."]
margin_right = 444.0
margin_bottom = 728.0
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource( 8 )
input = NodePath("../ViewportContainer/Viewport/Input")
output = NodePath("../ViewportContainer/Viewport/Output")

[node name="ViewportContainer" type="ViewportContainer" parent="."]
margin_left = 456.0
margin_right = 1352.0
margin_bottom = 728.0
size_flags_horizontal = 3
size_flags_vertical = 3
size_flags_stretch_ratio = 2.0
stretch = true
script = ExtResource( 2 )
__meta__ = {
"_edit_use_anchors_": false
}
root = NodePath("Viewport/Output")
camera_root = NodePath("Viewport/Pivot")
static_light = NodePath("Viewport/Lighting/DirectionalLight")
camera_light = NodePath("Viewport/Pivot/Camera/DirectionalLight")
legend = NodePath("MarginContainer/HBoxContainer/LeftColumn/Legend")

[node name="Viewport" type="Viewport" parent="ViewportContainer"]
size = Vector2( 896, 728 )
size_override_stretch = true
own_world = true
world = SubResource( 1 )
handle_input_locally = false
msaa = 2
usage = 3
render_target_update_mode = 3
physics_object_picking = true
script = ExtResource( 7 )

[node name="Pivot" type="Spatial" parent="ViewportContainer/Viewport"]
transform = Transform( 0.707107, -0.45452, 0.541675, 0, 0.766044, 0.642788, -0.707107, -0.454519, 0.541675, 0, 0, 0 )
script = ExtResource( 3 )

[node name="Camera" type="Camera" parent="ViewportContainer/Viewport/Pivot"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 3 )
far = 1500.0

[node name="DirectionalLight" type="DirectionalLight" parent="ViewportContainer/Viewport/Pivot/Camera"]
transform = Transform( 1, 0, 0, 0, 0.939693, 0.34202, 0, -0.34202, 0.939693, 0, 0, 0 )
light_energy = 0.7
light_specular = 0.0

[node name="Lighting" type="Spatial" parent="ViewportContainer/Viewport"]

[node name="DirectionalLight" type="DirectionalLight" parent="ViewportContainer/Viewport/Lighting"]
transform = Transform( 0.446463, -0.751037, 0.48643, 0.446463, 0.658088, 0.606293, -0.775463, -0.0535144, 0.629122, 2.00127, 0, -1.33922 )
visible = false
light_energy = 0.7
light_specular = 0.0
directional_shadow_mode = 1

[node name="WorldEnvironment" type="WorldEnvironment" parent="ViewportContainer/Viewport/Lighting"]
environment = ExtResource( 1 )

[node name="Input" type="Spatial" parent="ViewportContainer/Viewport"]

[node name="Output" type="Spatial" parent="ViewportContainer/Viewport"]

[node name="MarginContainer" type="MarginContainer" parent="ViewportContainer"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_constants/margin_right = 4
custom_constants/margin_top = 4
custom_constants/margin_left = 4
custom_constants/margin_bottom = 4

[node name="HBoxContainer" type="HBoxContainer" parent="ViewportContainer/MarginContainer"]
margin_left = 4.0
margin_top = 4.0
margin_right = 892.0
margin_bottom = 724.0

[node name="LeftColumn" type="VBoxContainer" parent="ViewportContainer/MarginContainer/HBoxContainer"]
margin_right = 442.0
margin_bottom = 720.0
size_flags_horizontal = 3
custom_constants/separation = 6

[node name="DisplayOptions" type="HBoxContainer" parent="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn"]
margin_right = 142.0
margin_bottom = 25.0
size_flags_horizontal = 0
size_flags_vertical = 0

[node name="Legend" type="Button" parent="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn/DisplayOptions"]
margin_right = 27.0
margin_bottom = 25.0
focus_mode = 0
custom_fonts/font = ExtResource( 9 )
toggle_mode = true
text = " ? "

[node name="ResetCamera" type="Button" parent="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn/DisplayOptions"]
margin_left = 31.0
margin_right = 59.0
margin_bottom = 25.0
hint_tooltip = "Reset the camera position and orientation to aim at the center of the scene"
focus_mode = 0
icon = ExtResource( 5 )

[node name="VSeparator2" type="VSeparator" parent="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn/DisplayOptions"]
margin_left = 63.0
margin_right = 78.0
margin_bottom = 25.0
custom_constants/separation = 15

[node name="LightSetup1" type="Button" parent="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn/DisplayOptions"]
margin_left = 82.0
margin_right = 110.0
margin_bottom = 25.0
hint_tooltip = "Light follows the camera so the result is always illuminated"
focus_mode = 0
icon = ExtResource( 6 )

[node name="LightSetup2" type="Button" parent="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn/DisplayOptions"]
margin_left = 114.0
margin_right = 142.0
margin_bottom = 25.0
hint_tooltip = "Light is static so you can see part of the result shadowed"
focus_mode = 0
icon = ExtResource( 4 )

[node name="Legend" type="PanelContainer" parent="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn"]
visible = false
margin_top = 31.0
margin_right = 165.0
margin_bottom = 97.0
size_flags_horizontal = 0
custom_styles/panel = SubResource( 2 )

[node name="Label" type="Label" parent="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn/Legend"]
margin_left = 6.0
margin_top = 6.0
margin_right = 159.0
margin_bottom = 60.0
custom_constants/line_spacing = 6
text = "Middle Click: Orbit
Shift + Middle Click: Pan
Scroll Up / Down: Zoom"

[node name="RightColumn" type="VBoxContainer" parent="ViewportContainer/MarginContainer/HBoxContainer"]
margin_left = 446.0
margin_right = 888.0
size_flags_horizontal = 3
size_flags_vertical = 0
alignment = 2
[connection signal="scene_updated" from="ViewportContainer" to="Tree" method="_update_tree"]
[connection signal="toggled" from="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn/DisplayOptions/Legend" to="ViewportContainer" method="display_legend"]
[connection signal="pressed" from="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn/DisplayOptions/ResetCamera" to="ViewportContainer/Viewport/Pivot" method="reset_camera"]
[connection signal="pressed" from="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn/DisplayOptions/LightSetup1" to="ViewportContainer" method="enable_camera_light"]
[connection signal="pressed" from="ViewportContainer/MarginContainer/HBoxContainer/LeftColumn/DisplayOptions/LightSetup2" to="ViewportContainer" method="enable_static_light"]
